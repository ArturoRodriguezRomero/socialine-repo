<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="assets/favicon.png" />
  <title>Socialine</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <div class="app-wrapper">
    <div id="app">
      <div class="main-panel">
        <div class="sidebar">
          <div class="sidebar-header">
            <div class="item">
              <div class="client-picture" v-bind:style="{'background-image': 'url(' + client.pictureUrl + ')'}"></div>
              <div class="client-body">
                <div class="client-name">{{client.name}}</div>
                <div class="client-about">{{client.about}}</div>
              </div>
            </div>
            <div class="item">
              <div class="client-modify" v-on:click="toggleSlidingPanel('sliding-panel')">
                <i class="fas fa-bars"></i>
              </div>
            </div>
          </div>
          <div class="sidebar-body">
            <div class="user-list scrollbar">
              <div class="user-item" v-for="user in users" v-if="user._id != client._id" v-on:click="selectUser(user)" v-bind:class="[user._id == selectedUser._id ? 'selected': '']">
                <div class="user-picture" v-bind:style="{'background-image' : 'url(' + user.pictureUrl +')'}"></div>
                <div class="user-body">
                  <div class="user-name">{{user.name}}</div>
                  <div class="user-about">{{user.about}}</div>
                </div>
                <div class="user-new-message"></div>
              </div>
            </div>
          </div>
          <div class="sliding-panel">
            <div class="sliding-header">
              <div class="panel-title">Settings</div>
              <div class="close-panel" v-on:click="toggleSlidingPanel('sliding-panel')">
                <i class="fas fa-times"></i>
              </div>
            </div>
            <div class="sliding-body">
            </div>
          </div>
        </div>
        <div class="chat-wrapper">
          <div class="chat-header">
            <div class="hide-chat" v-on:click="hideChat"><i class="fas fa-angle-left"></i></div>
            <div class="receiver-picture" v-bind:style="{ 'background-image': 'url(' + selectedUser.pictureUrl + ')' }"></div>
            <div class="receiver-body">
              <div class="receiver-name">{{selectedUser.name}}</div>
              <div class="receiver-last-connection">{{selectedUser.lastConnection}}</div>
            </div>
          </div>
          <div class="chat-body scrollbar">
            <div class="chat">
              <div class="message" v-for="message in clientMessages" v-if="message.sender == selectedUser._id || message.receiver == selectedUser._id" v-bind:class="[message.sender == client._id ? 'local': '']">
                <div class="text">{{message.text}}</div>
                <div class="timestamp">{{message.timestamp}}</div>
              </div>
            </div>
            <div class="splash-screen" v-if="selectedUser._id == undefined">
              <div class="app-name">Socialine</div>
              <div class="app-logo"></div>
            </div>
          </div>
          <div class="chat-input">
            <input class="textbox" v-model.trim="messageInput" v-on:keydown.enter="sendMessage" :disabled="selectedUser._id == undefined" type="text" name="" id="messageInput" :placeholder="selectedUser._id == undefined ? 'Select a contact first...' : 'Write your message here...'">
            <button class="action-button" v-on:click="sendMessage" :disabled="selectedUser._id == undefined">
              <span>
                <i class="fas fa-location-arrow" data-fa-transform="rotate-45"></i>
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

<!--script>
  document.addEventListener("DOMContentLoaded", function (event) {
    console.log("DOM fully loaded and parsed");
  });
  window.addEventListener("load", function(event) {
    console.log("All resources finished loading!");
  });
</script-->

<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="//unpkg.com/@feathersjs/client@^3.0.0/dist/feathers.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>
<script src="client.js"></script>

</html>